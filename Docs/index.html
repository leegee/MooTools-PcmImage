<html lang='en'>
<head>
	<title>PcmImage - A MooTools Plugin</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta charset="utf-8">
	
	<meta name="author" content="Lee Goddard (http://www.leegoddard.net/)" />
	<meta name="copyright" content="Copyright (c) 2011 Lee Goddard" />
	<meta name="description" content="PcmImage: a MooTools plugin to create a PCM graph image from a sound file using the Web Audio API"/>
	<meta name="keywords" content="pcm, graph, image, audio, wav, mp3, ogg, automatic, web audio api, audio, lee goddard, html5"/>

    	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/mootools/1.4/mootools-yui-compressed.js"></script>
    	
	<script src="../Source/PcmImage.js"></script>

	<script>
		document.addEvent('domready', function(){
			new PcmImage( {
				element: document.id('soundtest-gradient'),
				uri: 'pluck.wav',
				strokeStyle: 'blue',
				onCanvasLoaded: function(){ 
					var gradient=this.cctx.createLinearGradient(0,0, 100, 0);
					gradient.addColorStop("0","magenta");
					gradient.addColorStop("0.5","blue");
					gradient.addColorStop("1.0","red");
					this.options.strokeStyle = gradient;
				}
			} );
		});
	</script>

	<style>
		.pcmimg {
			background: orange;
			color: white;
			width:500px;
			height:100px; 
			border:1px solid black;
		}
		
		figure {
			width: auto;
			display: block;
			border-bottom: 4pt dotted gray;
			margin-bottom: 1em;
			padding-bottom: 1em;
		}
		
		figcaption {
			margin-bottom: 1em;	
		}
		
		#pcm {
			display: block;
			margin-top: 50pt
		}
		article {
			padding: 1em
		}
	</style>

</head>

<body>

	<header>
		<h1>PcmImage.js</h1>
	</header>

	<section>
		<article>

	<heading>
		<h2>Soundfile PCM Wave Visualisation</h1>
	</heading>

	<p>
		This code produces PCM waveform graphs from any
		sound file supported by your WebAudio API-compatible browser.
		Currently, that does not include Mozilla.
	</p>

	<p>
		There are two ways to use the code: directly from JavaScript,
		or through HTML5 dataset attributes. In each case, the 
		graphic is rendered on a canvas element, which is inserted
		into an element that is specified by name, reference, or
		in the DOM through specifiying a CSS class of <code>pcmimg</code>.
	</p>
	
	<p>
		The source is straight-forward and details events supported,
		though these are unncessary for basic operation.
	</p>
	
	<p>
		The <code>data-step</code> specifies the unit for stepping
		through the PCM data, default is 8. Variations are illustrated
		below.
	</p>
	
	<p>
		The <code>data-img</code> attribute, if set, causes
		the default <code>canvas</code> element to be replaced
		with an <code>img</code> element.
	</p>
	
	<p>
		Fuller docs are in the README.md file.
	</p>
	
<figure>
	<figcaption>
		<p>HTML default, style from class:</p>
		<div><pre><code><xmp>
<style>
	.pcmimg {
		background: orange;
		color: white;
		width:500px;
		height:100px; 
		border:1px solid black
	}
</style>
<div class='pcmimg'
	data-uri='pluck.wav'
></div>
		</xmp></code></pre></div>
	</figcaption>

	<div id='soundtest3'
		data-uri='pluck.wav'
		class='pcmimg'
	></div>
</figure>

<figure>
	<figcaption>HTML with style attribute</figcaption>
		<div id='soundtest4'
			data-uri='pluck.wav'
			data-asimg=true
			class='pcmimg'
			style='width:600;height:200;background:steelblue'
		></div>
</figure>

<figure>
	<figcaption>HTML with data-step=1</figcaption>
		<div id='soundtest6'
			class='pcmimg'
			data-uri='pluck.wav'
			data-step='1'
		></div>
</figure>

<figure>
	<figcaption>HTML with data-step=32</figcaption>
		<div id='soundtest6'
			class='pcmimg'
			data-uri='pluck.wav'
			data-step='32'
		></div>
</figure>

<figure>
	<figcaption>HTML with data-step=64</figcaption>
		<div id='soundtest6'
			class='pcmimg'
			data-uri='pluck.wav'
			data-step='64'
		></div>
</figure>

<figure>
	<figcaption>HTML with data-step=256</figcaption>
		<div id='soundtest6'
			class='pcmimg'
			data-uri='pluck.wav'
			data-step='256'
		></div>
</figure>

<figure>
	<figcaption>HTML with data-step=128</figcaption>
		<div id='soundtest6'
			class='pcmimg'
			data-uri='pluck.wav'
			data-step='128'
		></div>
</figure>

<figure>
	<figcaption>
		HTML with data-asImg=true,
		causing the <code>canvas</code> to be replaced by an <code>img</code>
	</figcaption>
		<div id='soundtest6'
			class='pcmimg'
			data-uri='pluck.wav'
			data-step='128'
			data-asImg='true'
		></div>
</figure>

<figure>
	<figcaption>
	JavaScript with the <code>onCanvasLoaded</code> callback
	used to define a gradient for the <code>strokeStyle</code> option.s
	<div><pre><code>
	var mess = new PcmImage( {
		element: document.id('soundtest-gradient'),
		uri: 'pluck.wav',
		onCanvasLoaded: function(){ 
			var gradient=this.cctx.createLinearGradient(0,0, this.canvas.width, 0);
			gradient.addColorStop("0","blue");
			gradient.addColorStop("0.5","magenta");
			gradient.addColorStop("1.0","red");
			this.options.strokeStyle = gradient;
		}
	} );</code>
		</pre>
	</figcaption>
	<div id='soundtest-gradient' style='background:pink;width:500px;height:100px;'></div>
</figure>

</div></article>
</section>
	
</body>
</html>

